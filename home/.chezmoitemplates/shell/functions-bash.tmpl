# Reconcile a specific resource or all resources in a namespace (Bash version)
fxrecall() {
  NAMESPACE=${1:-flux-system}
  echo "Reconciling all resources in namespace: $NAMESPACE"

  # Reconcile sources first
  echo "Reconciling sources..."
  flux get sources all -n $NAMESPACE -o name | xargs -r -I{} flux reconcile {} -n $NAMESPACE

  # Then kustomizations
  echo "Reconciling kustomizations..."
  flux get kustomizations -n $NAMESPACE -o name | xargs -r -I{} flux reconcile {} -n $NAMESPACE

  # Finally helm releases
  echo "Reconciling helm releases..."
  flux get helmreleases -n $NAMESPACE -o name | xargs -r -I{} flux reconcile {} -n $NAMESPACE

  echo "Reconciliation complete!"
}

# Enhanced logs with grep (Bash version)
fxglog() {
  flux logs --all-namespaces | grep "$1"
}

# GAMA CLI command with GitHub token (Bash version)
gama() {
  GITHUB_TOKEN="$(gh auth token)" command gama "$@"
}

# Include Bitwarden utilities if enabled
{{- if .bitwarden.enabled }}
{{ includeTemplate "bitwarden/functions-bash.tmpl" . }}
{{- end }}

# Include AWS utilities if enabled
{{- if .aws.enabled }}
{{ includeTemplate "aws/functions.tmpl" . }}
{{- end }}
