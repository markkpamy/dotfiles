# Fish initialization
fish_config theme choose "Catppuccin Mocha"
if status is-interactive
# Initialize tools
    if command -v atuin &>/dev/null
        atuin init fish | source
    end
end

# Increase file descriptor limit
ulimit -n 4096

# Initialize prompt
if command -v oh-my-posh &>/dev/null
    oh-my-posh init fish --config $HOME/.oh-my-posh.json | source
end
{{/* Comment out this block since it's causing issues
elif command -v starship &>/dev/null
    starship init fish | source
end
*/}}

if command -v zoxide &>/dev/null
    zoxide init fish | source
end

if command -v jump &>/dev/null
    jump shell fish | source
end

if command -v direnv &>/dev/null
    direnv hook fish | source
end

if command -v kubectl &>/dev/null
    kubectl completion fish | source
end

# UV completion
if command -v uv &>/dev/null
    uv generate-shell-completion fish | source
end

# UVX completion
if command -v uvx &>/dev/null
    uvx generate-shell-completion fish | source
end

# Terraform completion
if command -v terraform &>/dev/null
    terraform -install-autocomplete &>/dev/null
end

# Helm completion
if command -v helm &>/dev/null
    helm completion fish | source
end

# Azure CLI completion
if command -v az &>/dev/null
    az completion --shell fish | source
end

# GitHub CLI completion
if command -v gh &>/dev/null
    gh completion -s fish | source
end

# Flux CD completion
if command -v flux &>/dev/null
    flux completion fish | source
end

# Fish-specific settings
export ENHANCD_ENABLE_DOUBLE_DOT=false
