# Cargo Configuration
# https://doc.rust-lang.org/cargo/reference/config.html

[build]
# Use all available CPU cores for compilation
jobs = 0

[net]
# Use Git CLI for Git operations (better authentication)
git-fetch-with-cli = true

[profile.release]
# Optimize for size in release builds
lto = true
codegen-units = 1

[registries.crates-io]
protocol = "sparse"

{{ if eq .chezmoi.os "windows" }}
# Windows-specific configuration
[target.x86_64-pc-windows-msvc]
linker = "link.exe"
{{ end }}

# Additional optimization for development builds
[profile.dev]
# Faster incremental builds
incremental = true

# Faster linking on macOS and Linux
{{ if ne .chezmoi.os "windows" }}
[target.x86_64-unknown-linux-gnu]
linker = "clang"
rustflags = ["-C", "link-arg=-fuse-ld=lld"]
{{ end }}
